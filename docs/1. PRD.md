# Product Requirements Document (PRD)

**Product:** Wani  
**Version:** 1.0  
**Date:** 2024-12-20  
**Owner:** [Tu Nombre]  
**Status:** üü° Planning

---

## 1. Product Vision

### Problem Statement

El sistema financiero tradicional es prohibitivamente caro e inflexible para transacciones cross-border y pagos locales en LATAM. Comerciantes pierden 3-3.5% en comisiones por TPV, trabajadores remotos no pueden usar sus ingresos internacionales f√°cilmente, y las remesas cuestan 5-8% en comisiones.

**Para qui√©n:** Trabajadores remotos, migrantes que env√≠an remesas, comerciantes locales en M√©xico  
**El problema es:** Costos excesivos, lentitud, y falta de integraci√≥n entre pagos internacionales y uso local del dinero  
**Actualmente ellos:** Usan m√∫ltiples servicios fragmentados (Wise para recibir, banco para guardar, Mercado Pago para cobrar, Western Union para remesas)  
**Nuestro producto:** Un sistema unificado que permite recibir dinero internacional y gastarlo localmente sin fricci√≥n, usando blockchain como infraestructura invisible

### Success Definition

En 6 meses, este producto ser√° exitoso si:

- **Usuarios activos:** 500+ usuarios con balance >$500 MXN realizando 1+ transacci√≥n/semana
- **Comerciantes activos:** 50+ comerciantes procesando >10 transacciones/semana cada uno
- **Volumen mensual:** $100,000+ USD procesados a trav√©s de la plataforma
- **Retenci√≥n D30:** >40% de usuarios contin√∫an usando despu√©s de 30 d√≠as
- **NPS:** >50 (promotores - detractores)

---

## 2. User Personas

### Primary User 1: Trabajador Remoto (Carlos)

- **Context:** Desarrollador en Guadalajara trabajando para empresa en Toronto
- **Goal:** Recibir su salario internacional y gastarlo en M√©xico sin perder dinero en comisiones
- **Pain:** Payoneer/Wise le cobran comisi√≥n + 1-2 d√≠as para sacar a banco + no construye historial crediticio local
- **Tech Level:** Alto - usa apps fintech, c√≥modo con tecnolog√≠a

### Primary User 2: Comerciante Local (Don Pedro)

- **Context:** Due√±o de tiendita en CDMX, procesa $100k MXN/mes
- **Goal:** Aceptar pagos digitales sin perder 3.5% en comisiones
- **Pain:** Mercado Pago cobra demasiado, terminal cuesta $500-1,500 MXN, dinero tarda 2-3 d√≠as
- **Tech Level:** Medio - usa smartphone, necesita interfaz simple

### Secondary User: Migrante enviando remesas (Juan)

- **Context:** Trabaja en Los Angeles, env√≠a $500 USD/mes a su mam√° en Michoac√°n
- **Goal:** Enviar dinero r√°pido y barato sin que su mam√° tenga que ir a sucursal
- **Pain:** Western Union cobra $30+ por env√≠o, mam√° tiene que ir a recoger efectivo
- **Tech Level:** Medio - usa apps b√°sicas, mam√° es nivel bajo-medio

---

## 3. Core User Stories

### üéØ Must Have (MVP)

1. **Como trabajador remoto, quiero recibir pagos desde USA/Canad√° instant√°neamente para no esperar d√≠as ni pagar comisiones altas**

   - **AC:** Usuario puede recibir USDC/USD y ver balance en MXN en <10 segundos
   - **AC:** Comisi√≥n del env√≠o es <2% del monto
   - **AC:** No requiere cuenta bancaria mexicana

2. **Como comerciante, quiero aceptar pagos NFC/QR desde mi celular para no comprar hardware costoso**

   - **AC:** Comerciante descarga app, completa registro en <5 minutos
   - **AC:** Genera QR o activa NFC desde su celular
   - **AC:** Recibe dinero instant√°neamente en su wallet
   - **AC:** Paga m√°ximo 1% de comisi√≥n

3. **Como usuario, quiero pagar con NFC/QR en comercios Wani para no tener que sacar efectivo constantemente**

   - **AC:** Usuario escanea QR o toca con NFC en comercio
   - **AC:** Confirmaci√≥n de pago en <3 segundos
   - **AC:** Balance actualizado en tiempo real
   - **AC:** Recibo digital autom√°tico

4. **Como usuario, quiero hacer cash-out a mi banco o Bitso cuando necesite efectivo**

   - **AC:** Usuario puede transferir a cuenta bancaria mexicana o Bitso
   - **AC:** Proceso completo en <10 minutos
   - **AC:** Comisi√≥n y tiempo de llegada claros antes de confirmar

5. **Como usuario, quiero ver mi historial de transacciones para saber en qu√© gasto mi dinero**

   - **AC:** Lista de todas las transacciones (recibidas, enviadas, pagos)
   - **AC:** Filtros por fecha, tipo, monto
   - **AC:** Exportar a PDF/CSV

6. **Como usuario, quiero completar KYC b√°sico para cumplir regulaciones sin fricci√≥n excesiva**

   - **AC:** Registro con email/tel√©fono en <2 minutos
   - **AC:** Verificaci√≥n de identidad con INE/Pasaporte
   - **AC:** L√≠mites claros seg√∫n nivel de verificaci√≥n

7. **Como usuario nuevo, quiero cargar dinero a mi wallet desde diferentes fuentes para empezar a usar Wani**
   - **AC:** Puede cargar v√≠a: transferencia bancaria, tarjeta de d√©bito/cr√©dito, Circular (USA/CAN)
   - **AC:** Instrucciones claras para cada m√©todo
   - **AC:** Fondos disponibles en <10 minutos

### üìà Should Have (Post-MVP)

- Como comerciante alto volumen, quiero suscribirme mensualmente para pagar 0% comisi√≥n
- Como usuario, quiero usar biometr√≠a (Face ID/huella) para autenticar pagos r√°pidamente
- Como comerciante, quiero ver analytics de ventas para entender mi negocio
- Como usuario, quiero recibir cashback/rewards por usar Wani frecuentemente
- Como usuario, quiero enviar dinero P2P a otros usuarios Wani sin comisi√≥n

### üí° Could Have (Futuro)

- Como trabajador remoto, quiero acceder a cr√©dito basado en mi historial de pagos
- Como comerciante, quiero integrar Wani API a mi sistema POS existente
- Como usuario, quiero programar pagos recurrentes autom√°ticos
- Como usuario internacional, quiero enviar dinero a otros pa√≠ses LATAM
- Como comerciante, quiero ofrecer programas de lealtad a mis clientes

---

## 4. Functional Scope

### In Scope ‚úÖ

- Registro de usuarios con KYC b√°sico (Nivel 1)
- Dos apps separadas: Wani (usuario) + Wani Business (comerciante)
- Cargar wallet desde: tarjeta, banco MX, Circular (USA/CAN)
- Env√≠o cross-border USA/CAN ‚Üí M√©xico en <10 segundos
- Pagos NFC y QR entre usuarios y comerciantes
- Cash-out a Bitso (para convertir a efectivo o banco)
- Historial completo de transacciones
- Notificaciones push para cada transacci√≥n
- Conversi√≥n autom√°tica USD/CAD ‚Üí USDC ‚Üí MXN (invisible al usuario)
- Dashboard b√°sico para comerciante (volumen, transacciones recientes)
- Sistema de comisiones: 1% para comerciantes pay-as-you-go

### Out of Scope ‚ùå

- Suscripciones para comerciantes (Post-MVP)
- Transferencias P2P entre usuarios (Post-MVP)
- Biometr√≠a/Face ID (Post-MVP)
- Analytics avanzado para comerciantes (Post-MVP)
- Programa de rewards/cashback (Post-MVP)
- Cr√©dito o productos financieros (A√±o 2+)
- Expansi√≥n a otros pa√≠ses LATAM (A√±o 2+)
- Integraci√≥n con POS f√≠sicos de terceros (Futuro)
- Pagos recurrentes/suscripciones de usuarios (Futuro)

---

## 5. Technical Requirements

### Stack

- **Frontend Web:** React 18 + TypeScript + Tailwind CSS (PWA)
- **Frontend Mobile:** React Native + Expo SDK 50+ + NativeWind
- **Backend API:** FastAPI (Python 3.11+)
- **Database:** PostgreSQL 15+ (v√≠a Supabase)
- **Cache:** Redis
- **Queue:** Celery para jobs as√≠ncronos
- **Blockchain:** Stellar Network + USDC stablecoin
- **Auth:** Supabase Auth (JWT tokens)

### Non-Functional Requirements

- **Performance:**
  - API response <200ms P95
  - Transacci√≥n blockchain <10 segundos P99
  - App carga en <2 segundos en 4G
- **Security:**
  - End-to-end encryption para datos sensibles
  - Hot wallet monitoreo 24/7 con alertas
  - Rate limiting en todas las APIs
  - Audit logs completos
- **Scalability:**
  - Soportar 10,000 usuarios concurrentes
  - 100,000 transacciones/d√≠a
  - Database sharding ready
- **Availability:**
  - 99.5% uptime SLA
  - Max 4 horas downtime/mes
- **Compliance:**
  - KYC/AML desde d√≠a 1
  - L√≠mites transaccionales seg√∫n nivel verificaci√≥n
  - Reportes autom√°ticos CNBV

### External Dependencies

- **Circular:** Cash-in desde cuentas USA/CAN
- **Bitso:** Cash-out a pesos mexicanos y bancos MX
- **Stellar Network:** Infraestructura blockchain para transferencias
- **Supabase:** Backend-as-a-Service (DB + Auth)
- **Expo:** Build service para apps m√≥viles
- **Sentry:** Error tracking y monitoring
- **Vercel:** Hosting web app
- **Railway/Fly.io:** Hosting backend API

---

## 6. Data Model

### Core Entities

```javascript
User {
  id: uuid
  email: string
  phone: string
  fullName: string
  kycLevel: enum('none', 'basic', 'full')
  kycDocuments: json
  walletAddress: string (Stellar)
  role: enum('user', 'merchant')
  createdAt: timestamp
  lastLoginAt: timestamp
}

Wallet {
  id: uuid
  userId: uuid (FK)
  balanceMXN: decimal(18,2)
  balanceUSDC: decimal(18,6)
  stellarPublicKey: string
  stellarSecretKey: string (encrypted)
  status: enum('active', 'frozen', 'closed')
  createdAt: timestamp
}

Transaction {
  id: uuid
  type: enum('receive', 'send', 'payment', 'cashout')
  fromUserId: uuid (FK, nullable)
  toUserId: uuid (FK, nullable)
  amountMXN: decimal(18,2)
  amountUSDC: decimal(18,6)
  feeMXN: decimal(18,2)
  status: enum('pending', 'completed', 'failed', 'cancelled')
  stellarTxHash: string
  metadata: json
  createdAt: timestamp
  completedAt: timestamp
}

Merchant {
  id: uuid
  userId: uuid (FK)
  businessName: string
  businessType: string
  qrCode: string (static QR para cobros)
  nfcEnabled: boolean
  commissionRate: decimal(5,2) // Default 1.00%
  subscriptionPlan: enum('payg', 'basic', 'pro', 'enterprise')
  monthlyVolume: decimal(18,2)
  createdAt: timestamp
}

Payment {
  id: uuid
  transactionId: uuid (FK)
  merchantId: uuid (FK)
  customerId: uuid (FK)
  method: enum('nfc', 'qr')
  amountMXN: decimal(18,2)
  commissionMXN: decimal(18,2)
  receiptUrl: string
  createdAt: timestamp
}
```

### Key Relationships

- User 1:1 Wallet (cada usuario tiene una wallet)
- User 1:N Transaction (usuario puede tener muchas transacciones)
- Merchant 1:N Payment (comerciante recibe muchos pagos)
- Transaction 1:1 Payment (cada pago es una transacci√≥n)
- User 1:1 Merchant (algunos usuarios son tambi√©n comerciantes)

---

## 7. MVP Definition

### What Gets Built First

**Timeline:** 16 semanas (4 meses) = 8 sprints de 2 semanas

**Included:**

- ‚úÖ Registro + login + KYC b√°sico (INE/Pasaporte)
- ‚úÖ Wallet MXN visible al usuario (USDC en backend)
- ‚úÖ Cargar dinero: Circular (USA/CAN), tarjeta, banco MX
- ‚úÖ Env√≠o cross-border: USD/CAD ‚Üí MXN usando Stellar
- ‚úÖ Pagos NFC entre usuario-comerciante (Android + iOS)
- ‚úÖ Pagos QR entre usuario-comerciante
- ‚úÖ Cash-out a Bitso (para banco o efectivo)
- ‚úÖ Historial de transacciones con filtros
- ‚úÖ Notificaciones push para cada movimiento
- ‚úÖ Dashboard comerciante: volumen, transacciones, balance
- ‚úÖ Sistema comisiones 1% pay-as-you-go para comerciantes
- ‚úÖ Dos apps publicadas: Wani (iOS + Android) + Wani Business (iOS + Android)

**Excluded (Post-MVP):**

- ‚è∏Ô∏è Suscripciones mensuales comerciantes
- ‚è∏Ô∏è Transferencias P2P usuario-usuario
- ‚è∏Ô∏è Biometr√≠a (Face ID/Huella)
- ‚è∏Ô∏è Analytics avanzado comerciantes
- ‚è∏Ô∏è Programa rewards/cashback
- ‚è∏Ô∏è Integraci√≥n con otros on/off ramps

**Definition of Done:**

MVP est√° completo cuando:

1. 50-100 usuarios early adopters pueden: registrarse, cargar dinero, recibir cross-border, pagar en comercios, hacer cash-out
2. 10-20 comerciantes piloto pueden: aceptar pagos NFC/QR, ver dashboard b√°sico, recibir dinero instant√°neamente
3. Todas las transacciones cr√≠ticas funcionan con >99% success rate
4. Apps publicadas en App Store + Google Play
5. Backend en producci√≥n con monitoring activo
6. Documentaci√≥n de usuario completada

---

## 8. Risks & Assumptions

### Assumptions

- [ ] Usuarios est√°n dispuestos a adoptar una app financiera nueva (no banco establecido)
- [ ] Comerciantes aceptar√°n m√©todo de pago que sus clientes a√∫n no tienen (problema huevo/gallina)
- [ ] Stellar Network mantendr√° fees bajos (<$0.01 por transacci√≥n) y velocidad alta
- [ ] Podemos obtener licencia IFPE en M√©xico en <6 meses
- [ ] Circular acepta integrarse con nosotros para cash-in
- [ ] Bitso mantiene su API disponible y fees razonables
- [ ] NFC funciona confiablemente en Android + iOS para pagos

### Risks

| Risk                                                                                    | Impact    | Probability | Mitigation                                                                             |
| --------------------------------------------------------------------------------------- | --------- | ----------- | -------------------------------------------------------------------------------------- |
| Regulatorio: Rechazo/demora licencia IFPE                                               | üî¥ High   | üü° Medium   | Operar bajo licencia de partner temporal mientras tramitamos propia                    |
| T√©cnico: Stellar congestionado o fees suben                                             | üî¥ High   | üü¢ Low      | Tener plan B con otra blockchain (Polygon, Solana)                                     |
| Producto: Problema huevo/gallina (pocos usuarios ‚Üí pocos comerciantes ‚Üí pocos usuarios) | üü° Medium | üî¥ High     | Lanzar en √°rea geogr√°fica concentrada, subsidiar early adopters, onboarding manual 1:1 |
| T√©cnico: NFC no funciona confiablemente en todos dispositivos                           | üü° Medium | üü° Medium   | QR como backup siempre disponible                                                      |
| Negocio: Bitso cambia fees o cierra API                                                 | üü° Medium | üü¢ Low      | Tener 2-3 partners de cash-out alternativos listos                                     |
| Seguridad: Hot wallet hackeada                                                          | üî¥ High   | üü¢ Low      | Multisig wallet, cold storage para >80% fondos, monitoreo 24/7, seguro                 |
| Producto: CAC demasiado alto para ser sostenible                                        | üü° Medium | üü° Medium   | Enfoque org√°nico/referidos, no paid ads masivos en MVP                                 |

---

## 9. Release Plan

### Phase 1: Foundation (Sprints 1-2, Semanas 1-4)

- Setup infraestructura completa (Vercel, Railway, Supabase, Stellar testnet)
- Autenticaci√≥n + registro b√°sico funcional
- Base de datos y modelos core
- Integraci√≥n Stellar testnet (crear wallets, enviar USDC)
- CI/CD pipelines

### Phase 2: Core Features (Sprints 3-5, Semanas 5-10)

- KYC b√°sico con upload de documentos
- Cargar wallet (tarjeta, banco MX, Circular)
- Env√≠o cross-border funcional en mainnet
- Pagos NFC + QR en React Native
- Cash-out a Bitso
- Notificaciones push

### Phase 3: Polish & Beta (Sprints 6-7, Semanas 11-14)

- Dashboard comerciante completo
- Historial transacciones con filtros
- Dos apps separadas: Wani + Wani Business
- Testing exhaustivo (unit + integration + e2e)
- Bug fixing
- Documentaci√≥n usuario
- Beta privada con 50-100 early adopters

### Phase 4: Launch (Sprint 8, Semanas 15-16)

- Publicar en App Store + Google Play
- Launch en producci√≥n (Stellar mainnet)
- Monitoring y alertas 24/7
- Soporte al cliente ready
- Onboarding manual para primeros 10-20 comerciantes
- Gather feedback intensivo
- Iterar basado en uso real

---

## 10. Success Tracking

### Sprint Milestones

- **Sprint 1-2:** Infrastructure ready + Auth working
- **Sprint 3-4:** Stellar integration functional + Cash-in methods working
- **Sprint 5-6:** NFC/QR payments working + Cash-out to Bitso
- **Sprint 7:** Beta launch con primeros usuarios reales
- **Sprint 8:** Public launch en App Store + Google Play

### Post-Launch Metrics (Revisar semanalmente)

**Activation:**

- Usuarios registrados
- Usuarios con KYC completado (%)
- Usuarios que cargan dinero primera vez (%)
- Tiempo promedio registro ‚Üí primera transacci√≥n

**Engagement:**

- DAU / WAU / MAU
- Transacciones por usuario activo/semana
- Usuarios con balance >$500 MXN
- % usuarios que pagan en comercios (vs cash-out inmediato)

**Retention:**

- D1, D7, D30 retention
- Churn rate mensual
- Usuarios activos mes anterior que regresan este mes

**Revenue:**

- Volumen total procesado (USD)
- Fees generados (USD)
- GMV por comerciante activo
- CAC vs LTV (target <1:3)

**Quality:**

- NPS score (Net Promoter Score)
- Tasa √©xito transaccional (target >99%)
- Tiempo promedio transacci√≥n cross-border (target <10s)
- Tickets de soporte por usuario activo

---

## Quick Reference

**Este PRD alimenta:**
‚Üí ARCHITECTURE.md (dise√±o t√©cnico detallado)
‚Üí PRODUCT-BACKLOG.md (todas las User Stories priorizadas)
‚Üí Sprint Planning (seleccionamos del backlog cada sprint)

**Frecuencia de revisi√≥n:** Cada 3 meses o cuando haya cambio mayor en visi√≥n/mercado

**Stakeholders:** Equipo de desarrollo, posibles inversionistas, partners de integraci√≥n

---

## Appendix: Competitive Landscape

| Competidor           | Lo que hacen bien                             | Lo que NO hacen                                                | Nuestra ventaja                                    |
| -------------------- | --------------------------------------------- | -------------------------------------------------------------- | -------------------------------------------------- |
| Wise/Remitly         | Env√≠o cross-border barato y r√°pido            | No tienen wallet de uso diario, no tienen red de comerciantes  | Sistema unificado: recibir + gastar + cash-out     |
| Mercado Pago/Clip    | Wallet + pagos en comercios con gran adopci√≥n | No hacen cross-border, comisiones 3x m√°s altas                 | 70% m√°s barato, recibir internacional directamente |
| Bitso                | Remesas con crypto, env√≠o r√°pido              | Requiere cash-out, no es wallet diaria, no tienen comerciantes | Uso diario sin cash-out obligatorio                |
| Bancos tradicionales | Confianza establecida, regulados              | Lentos, caros, inflexibles, horarios limitados                 | Instant√°neo, 24/7, costos marginales ~$0           |
| PayPal/Venmo         | Red de usuarios grande en USA                 | No operan bien LATAM, fees altos internacional                 | Enfoque 100% corredor USA/CAN-LATAM                |

**Nuestra propuesta √∫nica:** Mismo costo marginal casi-cero de blockchain + UX simple como fintech tradicional = podemos ser 70% m√°s baratos manteniendo m√°rgenes saludables.

---

**End of PRD v1.0**
